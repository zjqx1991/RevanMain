# This file contains the fastlane.tools configuration
# You can find the documentation at https://docs.fastlane.tools
#
# For a list of all available actions, check out
#
#     https://docs.fastlane.tools/actions
#
# For a list of all available plugins, check out
#
#     https://docs.fastlane.tools/plugins/available-plugins
#

# Uncomment the line if you want fastlane to automatically update itself
# update_fastlane


  desc "Description of what the lane does"
  lane :RevanMain_lane do |options|

  #å¤–ç•Œä¼ å…¥å‚æ•°
  tagName = options[:tag]	
  targetName = options[:target]
  messageName = options[:msg]

  #0ã€git pull
  git_pull
  
  #1ã€pod install
  cocoapods(
	  clean: true,
	  podfile: "./Example/Podfile"
  )

  #2ã€git add .
  git_add(path: ".")

  #3ã€git commit -m "å‡çº§æè¿°"
  git_commit(path: ".", message: messageName)

  #4ã€pod lib lint
  pod_lib_lint(verbose: true, use_libraries: true, allow_warnings: true)

  #5ã€git push origin master
  push_to_git_remote

  # éªŒè¯tagæ˜¯å¦å­˜åœ¨,å¦‚æœå­˜åœ¨, åº”è¯¥åˆ é™¤æœ¬åœ°æ ‡ç­¾å’Œè¿œç¨‹æ ‡ç­¾
  #if åˆ¤æ–­æ ‡ç­¾æ˜¯å¦å­˜åœ¨
  #    æ‰§è¡Œåˆ é™¤æœ¬åœ°/è¿œç¨‹æ ‡ç­¾
  #end
  if git_tag_exists(tag: tagName)
    UI.message("å‘ç°tag: #{tagName}å·²ç»å­˜åœ¨ï¼Œå³å°†æ‰§è¡Œï¼Œåˆ é™¤å‘½ä»¤ ğŸš€")
    git_remove_tag(tag: tagName)
  end

  #6ã€git tag
  add_git_tag(
	tag: tagName
  )

  #7ã€git push --tags
  push_git_tags

  #8ã€pod repo push XXXX xxx.podspec
  pod_push(path: "#{targetName}.podspec", verbose: true, use_libraries: true, allow_warnings: true)
# pod_push(path: "#{targetName}.podspec", repo: "Specs", verbose: true, use_libraries: true, allow_warnings: true)
  end

